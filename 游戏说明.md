# 21点在线游戏 - 使用说明

## 🎮 游戏流程

### 1. 创建/加入房间

访问主页：`http://localhost:8080/21dian.html`

#### 创建房间：
1. 输入你的昵称
2. 点击"创建房间"按钮
3. 系统会生成一个房间ID
4. 自动跳转到游戏房间（你是房主 👑）

#### 加入房间：
1. 输入你的昵称
2. 点击"加入房间"按钮
3. 输入房间ID
4. 点击"确认加入"
5. 自动跳转到游戏房间

### 2. 等待玩家

进入房间后会看到**等待区域**：

- 显示当前房间玩家数量（最多6人）
- 显示所有玩家列表
- 房主（第一个加入的玩家）会有 👑 标记
- **只有房主**能看到"开始游戏"按钮

### 3. 开始游戏

- 房主点击"开始游戏"按钮
- 所有玩家收到游戏开始通知
- 每个玩家获得2张初始牌
- 游戏正式开始

**注意**：游戏开始后，其他玩家无法再加入房间！

### 4. 游戏进行

每个玩家轮流操作：

- **要牌**：再拿一张牌
- **停牌**：不再要牌，结束本轮

**目标**：让手中的牌点数尽可能接近21点，但不能超过（爆牌）

#### 点数计算：
- 数字牌：按面值计算（2-10）
- J、Q、K：算10点
- A：可以算1点或11点（自动选择最优）

### 5. 游戏结束

当所有玩家都停牌或爆牌时，游戏结束：

- 显示每个玩家的最终点数
- 最接近21点且未爆牌的玩家获胜 👑
- 爆牌（超过21点）的玩家失败

## 🎯 游戏规则

1. **最多6人同时游戏**
2. **房主控制游戏开始**
3. **游戏开始后无法加入**
4. **点数正好21点为"Blackjack"（最佳）**
5. **超过21点即爆牌（失败）**
6. **同时达到21点则平局**

## 🔧 技术架构

- **前端**：HTML + JavaScript + WebSocket
- **后端**：Go语言 + Gorilla WebSocket
- **通信**：实时WebSocket双向通信
- **游戏逻辑**：完全在后端处理，确保公平

## 📝 房间管理

### 房间状态：
- **等待中（0）**：可以加入
- **游戏中（1）**：无法加入
- **已结束（2）**：可以重新开始或退出

### 玩家状态：
- **等待中**：游戏未开始
- **操作中**：轮到该玩家操作
- **已停牌**：玩家选择停牌
- **已爆牌**：点数超过21

## 🌐 访问地址

- 主页：`http://localhost:8080/21dian.html`
- 游戏房间：`http://localhost:8080/21game.html?roomId=房间ID&nickname=昵称`

## 🚀 快速开始

```bash
# 1. 启动服务器
cd backend/build
./start.sh

# 2. 浏览器访问
http://localhost:8080/21dian.html

# 3. 创建房间，分享房间ID给朋友
# 4. 等待朋友加入
# 5. 房主点击开始游戏
# 6. 开始游戏！
```

## 💡 提示

- 房主可以等待更多玩家加入后再开始游戏
- 游戏支持实时聊天功能（开发中）
- 建议在局域网内游玩，或部署到公网服务器
- 房间ID是临时的，游戏结束后房间会被销毁

祝你游戏愉快！🎰
